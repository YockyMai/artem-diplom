import "../../App.css"
import {Link, useNavigate} from "react-router-dom";
import CallingPng from "../../assets/Calling.png"
import Contacts from "../../assets/Контакты_ +7 (917) 510-57-59.png"
import {useAppDispatch, useAppSelector} from "../../redux/hook/hook";
import {removeUser} from "../../redux/slices/userSlice";
import {isAuth} from "../../redux/slices/isAuthSlice";
import {IconUser} from "@tabler/icons-react";
import SearchCatalog from "../search-catalog";

const Header = () => {
    const navigate = useNavigate()
    const currentTotalPrice = useAppSelector(state => state.cart.totalPrice)
    const currentAuth = useAppSelector(state => state.isAuth.isAuth)
    const user = useAppSelector(state => state.user.user)
    const dispatch = useAppDispatch()
    const logout = () => {
        dispatch(isAuth(false))
        dispatch(removeUser())
        navigate('/')
    }
    return (
        <div>
            <header>
                <Link to={"/"} className="logo">
                    <svg width="73" height="73" viewBox="0 0 73 73" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule={"evenodd"} clipRule={"evenodd"}
                              d="M0.228241 59.6241C0.666241 68.9941 5.04624 72.4091 11.4702 72.3361H18.2602C22.5672 72.3361 51.4022 72.6991 61.7682 72.0361C69.3602 71.6001 72.0612 67.8961 72.4982 60.9221C72.7902 56.4181 73.5202 21.4771 72.2782 9.92711C71.7682 5.06011 68.1182 2.00911 63.6642 0.70111C61.0362 -0.01589 57.7512 0.34811 54.9782 0.21211C48.2612 -0.08789 41.1802 0.13011 34.6832 0.27511C30.8132 0.34811 18.9882 -0.37889 11.3962 0.27511C3.14824 1.00211 0.373241 5.36011 0.00824065 14.3681C-0.0647593 17.0561 0.373241 20.2521 0.300241 24.0301C0.300241 33.9101 -0.283759 49.7461 0.227241 59.6251L0.228241 59.6241Z"
                              fill="#BA131A"></path>
                        <path
                            d="M25.9233 14.6581C26.0693 15.3121 25.6313 15.9661 24.9733 16.1831C24.8247 16.2346 24.6665 16.2521 24.5102 16.2342C24.354 16.2164 24.2037 16.1636 24.0706 16.0799C23.9374 15.9962 23.8248 15.8837 23.741 15.7506C23.6572 15.6175 23.6043 15.4673 23.5863 15.3111C23.5863 15.3111 23.2213 13.2771 21.3863 13.2041H21.2403C20.2903 13.2041 19.4153 13.7121 18.6853 14.5841C17.8823 15.6011 17.3713 16.9811 17.2253 18.7971V19.3771C17.2253 20.6121 17.3713 21.7021 17.6633 22.5731C17.9553 23.3731 18.3203 24.0991 18.9033 24.5331C19.0493 24.6781 19.1953 24.8231 19.3413 24.8961C19.9983 25.3321 20.7283 25.4761 21.4583 25.4041C22.1883 25.2591 22.9183 24.8961 23.5753 24.1691C23.7953 23.9511 23.9403 23.7331 24.1593 23.4431C24.5243 22.8631 25.3273 22.6431 25.8393 23.0071C26.3513 23.3711 26.4963 24.1071 26.0593 24.6771C25.8327 25.0466 25.5632 25.388 25.2563 25.6941C24.1613 26.8561 22.9203 27.5841 21.6793 27.8011C20.3653 28.0191 19.0513 27.7281 17.9563 27.0011C17.7363 26.8561 17.4463 26.6381 17.2263 26.4211C16.4233 25.6951 15.8393 24.6781 15.4013 23.5151C15.0363 22.3531 14.8173 21.0451 14.8173 19.5921V18.8661C14.8903 16.4691 15.6933 14.5061 16.8613 13.0541C18.1013 11.5291 19.7083 10.6571 21.4613 10.6571H21.7533C25.1833 10.9471 25.9133 14.5801 25.9133 14.6521L25.9233 14.6581ZM48.5533 56.1381C47.8963 57.1551 47.1663 58.0281 46.5093 58.8261C45.7793 59.6261 44.9763 60.2791 44.2463 60.8601C43.8083 61.2231 43.1513 61.1501 42.8593 60.7151C42.5673 60.2801 42.7133 59.6151 43.1513 59.2621C43.8083 58.7541 44.5383 58.1621 45.1953 57.4461L46.3633 56.0661C45.0493 55.7761 43.8813 54.8311 44.0273 52.5791C44.3193 47.4941 50.0133 48.8741 50.7433 49.0921C51.1813 49.1651 51.4733 49.5281 51.4733 50.0361L51.1083 60.2061C51.1083 60.7861 50.5983 61.3061 50.0863 61.3061C49.5023 61.3791 49.0643 60.9431 49.1363 60.3621L49.2823 56.0761C48.9173 56.0761 48.7723 56.1491 48.5523 56.1491L48.5533 56.1381ZM49.2103 53.9581L49.2833 50.9081C48.1883 50.7631 45.9983 50.6181 45.9253 52.5061C45.7793 54.5401 48.0423 54.2491 49.2103 53.9591V53.9581ZM33.1503 50.7621C33.1503 50.1821 33.5883 49.6621 34.1003 49.6001C34.6843 49.5271 35.1223 49.9631 35.1223 50.4721L35.2683 55.7021L39.1383 50.1091C39.5033 49.6011 40.0883 49.4551 40.5253 49.7461C40.8173 49.9641 40.9633 50.2541 40.8903 50.6181L40.7443 58.7541C40.7443 59.3341 40.2343 59.8541 39.7223 59.8541C39.1383 59.9271 38.7003 59.4911 38.7723 58.9101L38.9183 53.9701L35.1953 59.3461C35.0493 59.6361 34.7573 59.7821 34.3923 59.8561C33.8083 59.9291 33.3703 59.4931 33.3703 58.9841L33.1503 50.7741V50.7621ZM24.3903 54.3221L28.0403 53.9591L27.8943 50.5451C27.8943 49.9651 28.3323 49.4451 28.8443 49.3831C29.4283 49.3101 29.8663 49.6731 29.8663 50.2551L30.2313 59.6991C30.2313 60.2791 29.7933 60.7991 29.2813 60.8611C28.6973 60.9341 28.2593 60.5711 28.2593 59.9891L28.1133 55.9211L24.5363 56.2841L24.8283 59.9161C24.9013 60.4961 24.4633 61.0161 23.8783 61.0781C23.2933 61.1401 22.8563 60.7881 22.7833 60.2781L22.0533 50.8341C21.9803 50.2541 22.4183 49.7341 23.0033 49.6721C23.5883 49.6101 24.0253 49.9621 24.0983 50.4721L24.3903 54.3221ZM65.1983 39.4301C64.6143 39.4301 64.2483 38.9941 64.2483 38.4131C64.3213 37.8331 64.7583 37.3961 65.3433 37.3131H67.8253C68.4093 37.3131 68.7753 37.7491 68.7753 38.3301C68.7023 38.9101 68.2653 39.3471 67.6803 39.4301H65.1983ZM58.1903 40.6651L60.8903 40.7381L59.7223 36.5981L58.189340.6661L58.1903 40.6651ZM61.4753 42.8451L57.3873 42.7721L56.7303 44.6621C56.5103 45.2421 55.9273 45.5341 55.4163 45.3881C54.9053 45.2421 54.6133 44.6621 54.8323 44.1531L58.8473 33.1831C59.0673 32.6031 59.6503 32.3111 60.1613 32.4571C60.3027 32.4909 60.432 32.563 60.535 32.6655C60.6381 32.768 60.7108 32.8969 60.7453 33.0381L63.9573 44.2981C64.1033 44.8061 63.8113 45.4601 63.2273 45.6061C62.7173 45.8241 62.1323 45.5331 61.9873 45.0261L61.4773 42.8461L61.4753 42.8451ZM47.8973 42.8451C47.8973 43.4251 47.3873 43.9451 46.8753 43.9451C46.2913 43.9451 45.8533 43.5091 45.9253 43.0011L46.3633 33.7751C46.3633 33.1951 46.8733 32.6751 47.3853 32.6751H47.5313L52.7873 32.7481C53.2973 32.7481 53.6633 33.1841 53.6633 33.6921L53.2983 42.8451C53.2983 43.4251 52.7883 43.9451 52.2763 43.9451C51.6923 44.0181 51.2543 43.5821 51.3263 43.0011L51.5463 34.7911L48.2613 34.7181L47.8963 42.8541L47.8973 42.8451ZM34.1003 43.7891C33.9543 44.3691 33.4433 44.7331 32.9323 44.7331C32.4223 44.6601 32.0563 44.1531 32.1293 43.6331L34.0993 33.5361C34.2453 32.9561 34.7563 32.5921 35.2673 32.5921C35.4463 32.6224 35.6143 32.6986 35.7551 32.8132C35.8958 32.9278 36.0044 33.077 36.0703 33.2461L37.9683 38.7661L39.9383 33.3901C40.1583 32.8101 40.7413 32.5181 41.2523 32.6641C41.6173 32.7371 41.8363 33.1001 41.9093 33.4641L43.6613 43.4161C43.6973 43.684 43.636 43.9559 43.4887 44.1824C43.3414 44.409 43.1177 44.5753 42.8583 44.6511C42.2743 44.7961 41.7633 44.5061 41.6903 43.9251L40.5223 37.4601L38.8423 42.0371C38.7693 42.3271 38.5503 42.5451 38.2583 42.6911C37.7483 42.9091 37.1633 42.6911 37.0183 42.1831L35.4123 37.4611L34.0983 43.7811L34.1003 43.7891ZM25.0483 34.8521C24.6833 34.9971 24.3183 35.2881 24.0983 35.6521C23.8063 36.0881 23.5883 36.5961 23.5143 37.1781C23.2943 38.2781 23.3683 39.5031 23.7343 40.4481C24.0263 41.2481 24.5373 41.7561 25.0483 42.0461C25.4133 42.2641 25.7783 42.2641 26.2163 42.2641C26.5813 42.1911 27.0193 42.0461 27.3113 41.7541C28.7713 40.5921 28.7713 37.9041 28.1873 36.3781C28.0413 35.8701 27.7493 35.5061 27.4573 35.2161C26.8003 34.7081 25.7053 34.5621 25.0473 34.8531L25.0483 34.8521ZM24.4643 32.9621C25.4792 32.5991 26.5885 32.5991 27.6033 32.9621C28.7713 33.3981 29.5733 34.3421 30.0133 35.5771C30.4533 36.8121 30.5233 38.4101 30.3783 39.7901V40.0081C30.1583 41.4611 29.3563 42.6231 28.4083 43.4221C27.7513 43.9321 27.0213 44.2941 26.2083 44.3661C25.4053 44.5111 24.6753 44.3661 23.9453 44.0031C23.0693 43.5671 22.3393 42.6951 21.8283 41.4611C21.3183 40.0081 21.1713 38.4111 21.4633 36.9571C21.6093 36.0851 21.9733 35.2871 22.4133 34.5601C22.9973 33.8341 23.6533 33.2531 24.4573 32.9621H24.4643ZM21.4713 44.6581C21.9813 45.0211 22.0553 45.8201 21.6173 46.4011C21.1793 46.9821 20.4493 47.1271 19.9373 46.7641C18.6973 45.8201 17.2373 44.5121 15.9223 43.1321C15.0463 42.1881 14.1703 41.1721 13.4403 40.0821L12.3453 41.7521L12.6373 46.1101C12.7103 46.7641 12.1993 47.4181 11.5423 47.5631C10.8853 47.7081 10.3023 47.2001 10.2283 46.5461L9.27832 32.6711C9.20532 32.0171 9.71632 31.3631 10.3733 31.2181C11.0303 31.0731 11.6133 31.5811 11.6873 32.2351L12.0523 37.9011L13.6583 35.7941C15.1913 33.9041 16.7243 32.3071 18.1113 30.9271C18.6213 30.4171 19.3513 30.4171 19.7913 30.9271C20.2313 31.4371 20.1563 32.1621 19.6453 32.6701C18.1298 34.0956 16.715 35.6246 15.4113 37.2461C15.2653 37.4641 15.1193 37.6091 14.9013 37.8261C15.7104 39.0334 16.6135 40.175 17.6023 41.2401C18.9893 42.6201 20.3023 43.8551 21.4723 44.6541L21.4713 44.6581ZM53.6643 22.6481C53.1543 23.5201 52.2773 24.5381 51.3283 25.4811C50.3063 26.4981 49.1283 27.4411 48.1163 27.9511C48.0037 28.0192 47.8777 28.0621 47.7469 28.0768C47.6161 28.0915 47.4837 28.0776 47.3588 28.0362C47.2338 27.9947 47.1194 27.9267 47.0233 27.8367C46.9273 27.7467 46.8519 27.637 46.8023 27.5151C46.5823 27.0071 46.8753 26.4151 47.3863 26.1351C48.1893 25.6991 49.1383 24.9731 50.0143 24.1011C50.5243 23.5911 51.0363 23.0011 51.4013 22.5031C50.0873 22.1401 49.2013 21.2681 48.9913 19.5251C48.9183 19.0171 48.9913 18.4251 49.1373 17.9271C49.3573 17.2011 49.7213 16.4741 50.3773 15.9671C51.0333 15.4601 51.8373 15.0951 52.9323 14.9501C53.7353 14.8771
54.6843 14.9501 55.8523 15.2501C56.2903 15.3231 56.5823 15.6861 56.5823 16.1941L56.2173 26.9441C56.2173 27.5241 55.7073 28.0441 55.1953 28.0441C54.6113 28.1171 54.1733 27.6811 54.2453 27.1001L54.3913 22.5961C54.1713 22.5961 53.9533 22.5961 53.6613 22.6691L53.6643 22.6481ZM54.4673 20.4681L54.6133 17.0541C53.9563 16.9091 53.4453 16.9091 52.9333 16.9091C52.3493 16.9821 51.9113 17.1271 51.6193 17.3451C51.3993 17.5631 51.1813 17.8531 51.1093 18.1451C51.1093 18.5081 51.0363 18.7991 51.1093 19.0891C51.1823 19.9611 51.6193 20.3241 52.2773 20.4691C52.8613 20.6871 53.6643 20.6141 54.4773 20.4691L54.4673 20.4681ZM41.8373 17.9981C41.2533 18.2161 40.8153 18.6521 40.5233 19.2331C40.2313 19.8871 40.0133 20.6861 40.0853 21.4851C40.0853 21.9951 40.1583 22.5851 40.3773 23.0111C40.5973 23.6651 41.0343 24.1731 41.3993 24.3911C41.7643 24.6091 42.1293 24.6091 42.4943 24.6091C42.8593 24.5361 43.2243 24.3911 43.5893 24.1731C44.0993 23.8101 44.5393 23.1561 44.6843 22.4301C44.7573 21.9201 44.8303 21.3301 44.8303 20.8321C44.8303 20.1061 44.6843 19.4521 44.3923 18.9421C44.1003 18.3621 43.5893 18.0701 43.0053 17.9981C42.6403 17.9251 42.2023 17.9251 41.8373 17.9981ZM41.3273 16.1081C41.7745 15.9594 42.2431 15.8857 42.7143 15.8901C43.0793 15.8901 43.4443 15.8901 43.8093 15.9631C44.9773 16.1811 45.7793 16.8351 46.2193 17.7061C46.6573 18.5061 46.8763 19.5221 46.8763 20.4661C46.8763 21.1921 46.8033 21.9191 46.6563 22.5731C46.3643 23.9531 45.6343 24.9701 44.6863 25.6971C44.3943 25.9151 44.0293 26.1331 43.6643 26.2771C42.8613 26.6401 41.9843 26.7131 41.1093 26.4951C40.831 26.4306 40.5614 26.3329 40.3063 26.2041C39.5033 25.7681 38.8463 25.0421 38.4813 23.8791C38.248 23.176 38.1248 22.4409 38.1163 21.7001C38.1163 20.6001 38.3363 19.4481 38.8463 18.4301C39.3563 17.3301 40.1603 16.5401 41.3283 16.1051L41.3273 16.1081ZM30.9603 19.7421C31.5443 19.6691 32.0553 19.5971 32.4933 19.3791C32.6991 19.2646 32.8694 19.0955 32.9853 18.8905C33.1012 18.6855 33.1583 18.4525 33.1503 18.2171C33.1503 18.0721 33.1503 17.9271 33.0773 17.8541C32.7853 17.0541 31.8373 16.7541 30.9603 16.8371V19.7431V19.7421ZM30.9603 21.7761V25.5531C31.1803 25.5531 31.3983 25.6261 31.5443 25.6261C32.4203 25.6261 33.0773 25.4811 33.5883 25.1901C34.0263 24.9001 34.3183 24.5361 34.3183 24.0281C34.3913 22.7201 33.4423 21.7031 32.2743 21.7031C31.8363 21.6301 31.3243 21.7761 30.9603 21.7761ZM35.1203 17.9991C35.1203 18.8711 34.9003 19.5971 34.4633 20.1791C34.7553 20.3241 34.9733 20.5421 35.1933 20.7591C35.8503 21.4851 36.2883 22.4291 36.3613 23.4471C36.4343 26.3531 33.8793 27.7331 31.2613 27.5871C30.7513 27.5871 30.2393 27.5141 29.6553 27.3691C29.2903 27.2961 28.9983 26.9331 28.9983 26.4971L28.9253 16.1821C28.9253 15.6741 29.2173 15.2381 29.7283 15.0201C30.3123 14.8021 30.8963 14.7301 31.4083 14.7301C32.2113 14.7301 33.0143 14.9481 33.6083 15.3101C34.2653 15.6731 34.7763 16.2541 34.9953 16.9801C35.0683 17.3431 35.1413 17.6341 35.1413 17.9971L35.1203 17.9991Z"
                            fill="white"></path>
                    </svg>
                </Link>
                <SearchCatalog/>
                <a href="tel:89175105759" className="contacts">
                    <img src={CallingPng} alt="phone icon"/>
                    <img src={Contacts} alt="number"/>
                </a>
                <div style={{display: "flex"}}>
                    <svg xmlns="http://www.w3.org/2000/svg" className="icon icon-tabler icon-tabler-message-2"
                         width="24"
                         height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                         stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M8 9h8"></path>
                        <path d="M8 13h6"></path>
                        <path
                            d="M9 18h-3a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-3l-3 3l-3 -3z"></path>
                    </svg>
                    <Link to={'/review'} className={'login'}>
                        Отзывы
                    </Link>
                </div>
                {!currentAuth && <>
                    <Link to="/signup" className="login">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="11.5788" cy="7.27803" r="4.77803" stroke="white" stroke-width="1.5"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"/>
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M4.00002 18.7014C3.99873 18.3655 4.07385 18.0337 4.2197 17.7311C4.67736 16.8158 5.96798 16.3307 7.03892 16.111C7.81128 15.9462 8.59431 15.836 9.38217 15.7815C10.8408 15.6533 12.3079 15.6533 13.7666 15.7815C14.5544 15.8367 15.3374 15.9468 16.1099 16.111C17.1808 16.3307 18.4714 16.77 18.9291 17.7311C19.2224 18.3479 19.2224 19.064 18.9291 19.6808C18.4714 20.6419 17.1808 21.0812 16.1099 21.2918C15.3384 21.4634 14.5551 21.5766 13.7666 21.6304C12.5794 21.7311 11.3866 21.7494 10.1968 21.6854C9.92221 21.6854 9.65677 21.6854 9.38217 21.6304C8.59663 21.5773 7.81632 21.4641 7.04807 21.2918C5.96798 21.0812 4.68652 20.6419 4.2197 19.6808C4.0746 19.3747 3.99955 19.0401 4.00002 18.7014Z"
                                  stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Регистрация
                    </Link><Link to="/signin" className="login">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11.5788" cy="7.27803" r="4.77803" stroke="white" stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"/>
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M4.00002 18.7014C3.99873 18.3655 4.07385 18.0337 4.2197 17.7311C4.67736 16.8158 5.96798 16.3307 7.03892 16.111C7.81128 15.9462 8.59431 15.836 9.38217 15.7815C10.8408 15.6533 12.3079 15.6533 13.7666 15.7815C14.5544 15.8367 15.3374 15.9468 16.1099 16.111C17.1808 16.3307 18.4714 16.77 18.9291 17.7311C19.2224 18.3479 19.2224 19.064 18.9291 19.6808C18.4714 20.6419 17.1808 21.0812 16.1099 21.2918C15.3384 21.4634 14.5551 21.5766 13.7666 21.6304C12.5794 21.7311 11.3866 21.7494 10.1968 21.6854C9.92221 21.6854 9.65677 21.6854 9.38217 21.6304C8.59663 21.5773 7.81632 21.4641 7.04807 21.2918C5.96798 21.0812 4.68652 20.6419 4.2197 19.6808C4.0746 19.3747 3.99955 19.0401 4.00002 18.7014Z"
                              stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Войти
                </Link></>}
                {currentAuth && <Link to={'/my-profile'}>
                    <button className={'CartBtn'}>Мой профиль</button>
                </Link>}
                {currentAuth && <div style={{display: "flex"}}>
                    <div className="role" style={{display: "flex"}}>
                        <IconUser style={{marginTop: '20%'}}/>
                        <p>{user?.username}</p>
                    </div>
                    <button style={{height: "30px", marginTop: '10%', marginLeft: '10%'}} className={'CartBtn'}
                            onClick={() => logout()}>Выйти
                    </button>
                </div>}

                {currentAuth && <div className="cart">
                    <Link to={"/cart"}>
                        <button type="button" className="CardButton">Корзина | {currentTotalPrice} ₽</button>
                    </Link>
                </div>}
                {user !== null &&
                    <>
                        {user.role === 'ADMIN' && <Link to={"/admin-panel"}>
                            <button type="button" className="CardButton">Панель администратора</button>
                        </Link>}
                    </>
                }
            </header>
        </div>
    );
};

export default Header;
